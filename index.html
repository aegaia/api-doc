<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Aegaia API – Enterprise Reference</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts & Theme -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <!-- Keep using your existing theme file to preserve dark background + left nav look -->
  <link rel="stylesheet" href="./docs/theme.css" />

  <style>
    /* Keep Scalar container full-width with your dark background */
    api-reference, api-client {
      --scalar-background-1: transparent;
      --scalar-container-max-width: 100vw;
    }
    /* Fallback: hide “Open API Client” if a theme update ever ignores config */
    a[title="Open API Client"],
    [data-testid="client-link"] {
      display: none !important;
    }
    /* Optional: hide Try It buttons purely via CSS (config also disables them) */
    [data-testid="try-it"] {
      display: none !important;
    }

    /* Simple header styles (matches your kit) */
    .header {
      display:flex; align-items:center; gap:12px; padding:16px 20px;
    }
    .logo-dark, .logo-light { height: 28px; }
    .logo-light { display:none; } /* default dark-first */
    .footer {
      padding: 20px; text-align: center; opacity: .7;
    }
  </style>
</head>
<body>
  <div id="app-root">
    <header class="header">
      <!-- Dark/Light logos (both point to your Aegaia logo asset) -->
      <img class="logo-dark" src="assets/aegaia-logo.webp" alt="Aegaia" />
      <img class="logo-light" src="assets/aegaia-logo.webp" alt="Aegaia" />
      <h1 style="margin:0;font-size:16px;font-weight:600">Aegaia Risk API</h1>
    </header>

    <!-- Scalar container -->
    <div id="app"></div>

    <footer class="footer">© Aegaia</footer>
  </div>

  <!-- Scalar API Reference (from CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>

  <!-- Your Scalar init (uses local spec + hides client/download/try-it) -->
  <script>
    // If you need to detect theme, you can flip logos here. Dark-first by default.
    document.querySelector('.logo-dark')?.classList.remove('hidden');
    document.querySelector('.logo-light')?.classList.add('hidden');

    Scalar.createApiReference('#app', {
      // IMPORTANT: use a local, private spec path
      url: './openapi.yaml',

      // Keep your look & feel
      theme: 'purple',               // or whatever your theme.css expects
      darkMode: true,                // dark background
      layout: 'modern',              // left nav + content
      metaData: { title: 'Aegaia API Reference' },

      // Make this a PRIVATE doc viewer
      hideClientButton: true,        // removes “Open API Client”
      hideTestRequestButton: true,   // removes “Try It” buttons
      documentDownloadType: 'none',  // hides spec download
      proxyUrl: null,                // avoid proxy.scalar.com; fetch directly

      // Optional polish
      withCredentials: false,
      tryItCredentialsPolicy: 'omit',
      // Show/Hide sections in the sidebar (tune as you like)
      showSidebar: true,
      searchHotKey: '/',
    });

    // Belt-and-suspenders: remove any “Open API Client” UI injected dynamically
    const nukeClientLinks = () => {
      document.querySelectorAll('a,button').forEach(el => {
        const t = (el.textContent || '').toLowerCase();
        if (t.includes('open api client')) el.style.display = 'none';
      });
    };
    new MutationObserver(nukeClientLinks).observe(document.documentElement, { childList: true, subtree: true });
    nukeClientLinks();
  </script>
</body>
</html>
